!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).utils={})}(this,(function(e){"use strict";const t=["string","number","boolean","undefined","bigint","symbol",null],n=(e,t)=>Object.prototype.toString.call(e)===`[object ${t}]`,r=e=>null===e||-1!==t.indexOf(typeof e),o=e=>n(e,"Function"),i=e=>n(e,"String"),s=e=>n(e,"Number"),a=e=>n(e,"Symbol"),d=e=>Array.isArray(e),c=e=>n(e,"Object");const l="((?:[a-z\\d][a-z\\d-]*\\.)+[a-z\\d]+)",p={method:"GET",mode:"cors",baseURL:"",headers:{"Content-Type":"application/json"},body:{},credentials:"same-origin",cache:"default",redirect:"follow",referrer:"client"},u=(e,t)=>{const{headers:n,method:r,...o}=e||{},{headers:i,method:s,...a}=t||{};return Object.assign({},{...o,...a},{method:(s||r||"").toUpperCase(),headers:Object.assign({},n||{},i||{})})};e.HTTP=class{constructor(e){this.config=u(p,e)}async fetch(e,t){return await window.fetch(e,t)}parseAPI(e){const t={method:"GET",url:e};if(e.indexOf(":")>-1){const[,n="",r=e]=e.match(/(^[a-zA-Z]+):\s*(.*)/)||[];n&&(t.method=n.toUpperCase()),r&&(t.url=r)}return t}resolve(e=""){return new RegExp(l,"i").test(e)?e:this.config.baseURL.replace(/\/$/,"")+"/"+e.replace(/^\//,"")}create(e){const t={};for(const n in e){const{method:r,url:o}=this.parseAPI(e[n]);t[n]=(e,t)=>{const n={...u(this.config,t),method:r,body:null!==e?JSON.stringify(e):void 0};return t&&t.method&&(n.method=t.method.toUpperCase()),["GET","HEAD"].indexOf(n.method)>-1&&delete n.body,this.fetch(this.resolve(o),n).then((e=>{let t=!1;return e.headers.forEach(((e,n)=>{"content-type"===n.toLowerCase()&&e.indexOf("application/json")>-1&&(t=!0)})),t?e.json():e}))}}return t}},e.REG_URI_DOMAIN=l,e.REG_URI_PATH="((?:\\/[a-z-\\d]+)*)",e.REG_URI_PORT="(?::(\\d+))?",e.REG_URI_PROTOCOL="(?:([a-z]+):\\/\\/)?",e.copy=async function(e){if("undefined"==typeof window)return;const t=await navigator.permissions.query({name:"clipboard-read"}),n=await navigator.permissions.query({name:"clipboard-write"}),[r,o]=await Promise.all([t,n]);["granted","prompt"].indexOf(r.state)>-1||["granted","prompt"].indexOf(o.state)>-1?await navigator.clipboard.writeText(e):await Promise.reject("请授权剪切板")},e.deepClone=e=>{const t=new Map,n=e=>{if(!o(e)){if(a(e))return Symbol(e.description);if(r(e))return e;if(d(e)){const r=[];return t.has(e)?t.get(e):(t.set(e,r),r.push(...e.map((e=>o(e)?null:n(e)))),r)}if(c(e)){const r={};if(t.has(e))return t.get(e);t.set(e,r);for(const t in e)o(e[t])||(r[t]=n(e[t]));return r}}};return n(e)},e.is=n,e.isArray=d,e.isBaseType=r,e.isBigInt=e=>n(e,"BigInt"),e.isBoolean=e=>n(e,"Boolean"),e.isDate=e=>!(!n(e,"Date")&&!i(e)||isNaN(new Date(e).valueOf()))||!(!s(e)||e===1/0||e===-1/0||e!==parseInt(e)),e.isDom=e=>n(e,"Element"),e.isFunction=o,e.isNull=e=>n(e,"Null"),e.isNumber=s,e.isObject=c,e.isPromise=e=>n(e,"Promise"),e.isRegExp=e=>n(e,"RegExp"),e.isString=i,e.isSymbol=a,e.isUndefined=e=>n(e,"Undefined"),e.mapListToObject=e=>e.reduce(((e,t)=>(e[t]=t,e)),{}),e.parseURL=e=>{const[t,n=""]=e.split("?"),[r,o=""]=t.split(/:?\/\//),[i="",s=""]=n.split("#"),a=i.split("&").reduce(((e,t)=>{const[n,r]=t.split("=");let o;return o=""===r||isNaN(Number(r))?r:Number(r),n in e?Array.isArray(e[n])?e[n].push(o):e[n]=[e[n],o]:e[n]=o,e}),{}),d=new RegExp("((?:[a-z\\d][a-z\\d-]*\\.)+[a-z\\d]+)(?::(\\d+))?((?:\\/[a-z-\\d]+)*)","i"),[,c="",l="",p=""]=o.match(d)||[];return{protocol:r,domain:c,port:l,path:p,params:a,hash:s}},e.random=(e=8)=>{const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",n=t+"0123456789",r=t.charAt(Math.floor(Math.random()*t.length));let o="";if(e<=0&&(e=8),e>1)for(let t=0;t<e-1;t++)o+=n.charAt(Math.floor(Math.random()*n.length));return r+o},Object.defineProperty(e,"__esModule",{value:!0})}));
